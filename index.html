<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nuestra Historia ‚ú®üíå</title>
  <meta name="description" content="Una carta rom√°ntica en una p√°gina web, con fotos y detalles interactivos." />
  <style>
    :root{
      --bg:#f37ebe;      /* fondo principal */
      --ink:#f6f6f9;     /* texto principal */
      --muted:#c9c9d1;   /* texto secundario */
      --rose:#ff4d6d;    /* acento rosado */
      --rose-2:#ff758f;  /* acento rosado claro */
      --card:#171722;    /* tarjetas */
      --glass: rgba(255,255,255,.08);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Arial,Helvetica,sans-serif;line-height:1.6; scroll-behavior:smooth;}
    a{color:var(--rose)}
    /* --- HERO --- */
    .hero{position:relative;min-height:92svh;display:grid;place-items:center;overflow:hidden}
    .hero::before{content:"";position:absolute;inset:0;background:url('images/joss11.jpg') center/cover no-repeat;filter:brightness(.5) saturate(1.1);}
    .hero::after{content:"";position:absolute;inset:0;background:radial-gradient(60% 60% at 50% 50%, transparent 0, transparent 50%, rgba(0,0,0,.55) 100%)}
    .hero-inner{position:relative;z-index:2;text-align:center;padding:40px}
    .badge{display:inline-block;padding:6px 12px;border-radius:999px;background:linear-gradient(90deg,var(--glass),transparent);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.15);color:var(--muted);font-size:14px}
    h1{font-size:clamp(34px,7vw,64px);margin:16px 0 10px;letter-spacing:.5px}
    .subtitle{color:var(--muted);font-size:clamp(15px,2.8vw,18px);max-width:780px;margin:0 auto}
    .cta{margin-top:24px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
    .btn{border:none;cursor:pointer;padding:12px 18px;border-radius:999px;background:linear-gradient(135deg,var(--rose),var(--rose-2));color:#fff;font-weight:600;box-shadow:var(--shadow);transition:transform .15s ease,filter .15s ease}
    .btn:hover{transform:translateY(-2px);filter:saturate(1.1)}
    .btn-outline{background:transparent;border:1px solid rgba(255,255,255,.25);color:var(--ink)}
    /* --- SECTIONS --- */
    section{padding:64px 20px}
    .container{max-width:1100px;margin:0 auto}
    .card{background:linear-gradient(180deg, var(--glass), transparent);border:1px solid rgba(255,255,255,.12);border-radius:var(--radius);box-shadow:var(--shadow)}
    /* Carta */
    .letter{display:grid;grid-template-columns:1.2fr .8fr;gap:28px;padding:28px}
    .letter p{margin:0 0 14px;font-size:18px;color:#f0eef6}
    .letter figure{margin:0}
    .letter img{width:100%;height:100%;object-fit:cover;border-radius:14px}
    @media (max-width:900px){
      .letter{grid-template-columns:1fr}
    }
    /* Highlight suave al llegar */
    .highlight-enter{box-shadow:0 0 0 0 rgba(255,255,255,0.0), 0 10px 30px rgba(0,0,0,.35)}
    .highlight-enter.flash{animation:flash 1.2s ease-out 1}
    @keyframes flash{
      0%{box-shadow:0 0 0 0 rgba(255,255,255,0.0), 0 10px 30px rgba(0,0,0,.35)}
      30%{box-shadow:0 0 0 8px rgba(255,255,255,0.18), 0 10px 30px rgba(0,0,0,.35)}
      100%{box-shadow:0 0 0 0 rgba(255,255,255,0.0), 0 10px 30px rgba(0,0,0,.35)}
    }
    /* Galer√≠a */
    .gallery{display:grid;grid-template-columns:repeat(12,1fr);gap:10px}
    .gallery a{position:relative;display:block;border-radius:14px;overflow:hidden}
    .gallery img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .25s ease}
    .gallery a:hover img{transform:scale(1.04)}
    .span-6{grid-column:span 6}
    .span-4{grid-column:span 4}
    .span-8{grid-column:span 8}
    @media (max-width:900px){
      .span-8,.span-6,.span-4{grid-column:span 12}
    }
    /* Modal (lightbox & mensaje) */
    .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.75);z-index:50;padding:20px}
    .modal.open{display:grid}
    .modal-inner{max-width:min(1000px,92vw);max-height:85vh;background:var(--card);border:1px solid rgba(255,255,255,.12);border-radius:16px;overflow:hidden;box-shadow:var(--shadow)}
    .modal-head{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.1)}
    .modal-body{padding:0;display:flex;justify-content:center;align-items:center}
    .modal-body img{display:block;max-height:75vh;width:auto}
    .x{background:transparent;border:none;color:var(--ink);font-size:22px;cursor:pointer}
    /* M√∫sica */
    .player{display:flex;align-items:center;gap:12px;background:linear-gradient(90deg,var(--glass),transparent);border:1px solid rgba(255,255,255,.15);padding:12px 16px;border-radius:12px}
    /* Corazones */
    .hearts{position:fixed;pointer-events:none;inset:0;overflow:hidden;z-index:60}
    .heart{position:absolute;font-size:16px;animation:float 5s linear forwards;opacity:.9;will-change:transform, opacity}
    @keyframes float{0%{transform:translateY(0) scale(.9)} 100%{transform:translateY(-110vh) scale(1.2);opacity:0}}
    footer{padding:50px 20px;color:var(--muted);text-align:center}
  </style>
</head>
<body>
  <!-- Corazones animados -->
  <div class="hearts" aria-hidden="true"></div>

  <!-- HERO -->
  <header class="hero" role="banner">
    <div class="hero-inner">
      <span class="badge">Para <strong><span id="nombre">Mi Princesa Joss</span></strong> ¬∑ <span id="fecha">09/08/2025</span></span>
      <h1 id="titulo">Desde que llegaste, todo cambi√≥</h1>
      <p class="subtitle" id="bajada">Esto no es solo una p√°gina, es mi forma favorita de decirte que eres mi lugar seguro. Gracias por existir y por elegir quedarte.</p>
      <div class="cta">
        <button class="btn" id="leerCarta">Leer mi carta</button>
        <button class="btn btn-outline" id="verGaleria">Ver nuestras fotos</button>
        <button class="btn btn-outline" id="abrirMensaje">Abrelo al final</button>
      </div>
      <div class="cta" style="margin-top:14px">
        <div class="player">
          <button class="btn" id="playSong" style="padding:8px 14px">‚ñ∂Ô∏é Nuestra canci√≥n</button>
          <audio id="song" preload="auto">
            <source src="music/nuestra-cancion.mp3.mp3" type="audio/mpeg" />
          </audio>
          <span style="color:var(--muted);font-size:14px">M√°s preciosa es que las piedras preciosas; y todo lo que puedas desear, no se puede comparar a ella. Proverbios 3:4</span>
        </div>
      </div>
    </div>
  </header>

  <!-- CARTA -->
  <section id="carta">
    <div class="container card letter highlight-enter" id="cartaCard">
      <div>
        <p>Amor,</p>
        <p>Hoy quise escribirte de una forma diferente‚Ä¶ no con simples palabras, sino con el alma abierta, para que sientas en cada letra el cari√±o inmenso que tengo por ti. Desde que nuestra historia comenz√≥, desde esas primeras reacciones tuyas en mis redes y en mis estados, despertaste en m√≠ una curiosidad hermosa‚Ä¶ y con el tiempo, esa curiosidad se transform√≥ en admiraci√≥n y en un sentimiento que crece cada d√≠a.</p>
        <p>Estos meses contigo han sido un regalo del cielo, llenos de momentos que guardar√© por siempre en mi coraz√≥n. S√© que Dios tiene un plan para nuestras vidas, y conf√≠o en que seguir√° permiti√©ndonos caminar juntos, tomados de la mano, por muchos a√±os m√°s.</p>
        <p>Eres parte esencial de mi vida, una luz que me acompa√±a incluso en mis d√≠as m√°s grises. Te aprecio, te quiero y te valoro m√°s de lo que las palabras pueden decir. Hemos pasado por tantas cosas, y aun as√≠, en cada ca√≠da y cada victoria, siempre est√°s ah√≠. Gracias por tu paciencia, por tus abrazos que sanan, por quedarte incluso cuando no era f√°cil.</p>
        <p>Mi flaquita hermosa, mi ni√±a, mi guapa, mi princesa‚Ä¶ mi todo. Lo √∫nico que deseo es que seas feliz, y que me dejes compartir y cuidar esa felicidad a tu lado. Tus virtudes son infinitas y ser√≠a imposible describirlas todas; solo puedo decirte que eres √∫nica en este mundo. Me encantas, me enamoras, y m√°s que nada, quiero seguir siendo parte de tu vida‚Ä¶ hoy, ma√±ana y siempre.</p>
        <p><em>‚Äî Erick</em></p>
      </div>
      <figure>
        <img src="images/joss12.jpg" alt="Nosotros, un instante especial">
      </figure>
    </div>
  </section>

  <!-- GALER√çA -->
  <section id="galeria">
    <div class="container">
      <div class="gallery">
        <a href="images/joss1.jpg" class="span-8 lb"><img src="images/joss1.jpg" alt="Momento 1"/></a>
        <a href="images/joss2.jpg" class="span-4 lb"><img src="images/joss2.jpg" alt="Momento 2"/></a>
        <a href="images/joss3.jpg" class="span-4 lb"><img src="images/joss3.jpg" alt="Momento 3"/></a>
        <a href="images/joss4.jpg" class="span-4 lb"><img src="images/joss4.jpg" alt="Momento 4"/></a>
        <a href="images/joss5.jpg" class="span-4 lb"><img src="images/joss5.jpg" alt="Momento 5"/></a>
        <a href="images/joss6.jpg" class="span-6 lb"><img src="images/joss6.jpg" alt="Momento 6"/></a>
        <a href="images/joss7.jpg" class="span-6 lb"><img src="images/joss7.jpg" alt="Momento 7"/></a>
        <a href="images/joss8.jpg" class="span-4 lb"><img src="images/joss8.jpg" alt="Momento 8"/></a>
        <a href="images/joss9.jpg" class="span-4 lb"><img src="images/joss9.jpg" alt="Momento 9"/></a>
        <a href="images/joss10.jpg" class="span-4 lb"><img src="images/joss10.jpg" alt="Momento 10"/></a>
        <a href="images/joss11.jpg" class="span-8 lb"><img src="images/joss11.jpg" alt="Momento 11"/></a>
        <a href="images/joss13.jpg" class="span-4 lb"><img src="images/joss13.jpg" alt="Momento 12"/></a>
      </div>
    </div>
  </section>

  <!-- MODAL -->
  <div class="modal" id="modal">
    <div class="modal-inner">
      <div class="modal-head">
        <strong id="modalTitle">üíó</strong>
        <button class="x" id="cerrarModal">‚úï</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <footer>Con todo mi ‚ù§Ô∏è para mi Joss <span id="footerNombre">Mi Amor</span>.</footer>

  <!-- SCRIPTS -->
  <script>
    const $  = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    const leerCarta    = $('#leerCarta');
    const verGaleria   = $('#verGaleria');
    const abrirMensaje = $('#abrirMensaje');
    const playSong     = $('#playSong');
    const song         = $('#song');

    const modal        = $('#modal');
    const modalBody    = $('#modalBody');
    const modalTitle   = $('#modalTitle');
    const cerrarModal  = $('#cerrarModal');

    const heartsLayer  = $('.hearts');
    const cartaCard    = $('#cartaCard');

    /* -------- Modal helpers -------- */
    function openModal({ title = 'üíó', contentNode }){
      modalTitle.textContent = title;
      modalBody.innerHTML = '';
      if(contentNode) modalBody.appendChild(contentNode);
      modal.classList.add('open');
      document.body.style.overflow='hidden';
    }
    function closeModal(){
      modal.classList.remove('open');
      document.body.style.overflow='';
    }
    cerrarModal.addEventListener('click', closeModal);
    modal.addEventListener('click', (e)=>{ if(e.target === modal) closeModal(); });

    /* -------- Lightbox en la galer√≠a -------- */
    $$('.lb').forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        const img = document.createElement('img');
        img.src = a.getAttribute('href');
        img.alt = a.querySelector('img')?.alt || '';
        img.style.maxWidth = '100%';
        img.style.height = 'auto';
        openModal({ title: 'üíó', contentNode: img });
      });
    });

    /* -------- Autoscroll suave + highlight al abrir la carta -------- */
    leerCarta.addEventListener('click', () => {
      cartaCard.classList.remove('flash'); // reset por si acaso
      document.querySelector('#carta').scrollIntoView({ behavior:'smooth', block:'start' });

      // Peque√±o retardo para aplicar el efecto cuando llega
      setTimeout(() => {
        cartaCard.classList.add('flash');
      }, 400);

      // Bonus: una peque√±a lluvia de corazones al abrir la carta
      burstHearts();
    });

    /* -------- Bot√≥n: Ver galer√≠a (abre toda la grilla en modal) -------- */
    verGaleria.addEventListener('click', () => {
      const grid = document.querySelector('#galeria .gallery');
      const gridClon = grid ? grid.cloneNode(true) : document.createElement('div');
      if(!grid){
        gridClon.textContent = 'No se encontr√≥ la galer√≠a üòÖ';
      } else {
        gridClon.querySelectorAll('a').forEach(a => a.addEventListener('click', e => e.preventDefault()));
      }
      openModal({ title: 'Nuestra galer√≠a', contentNode: gridClon });
      burstHearts(10, 1000); // corazones de emoci√≥n
    });

    /* -------- Bot√≥n: Abrir mensaje al final -------- */
   /* -------- Bot√≥n: Abrir mensaje al final (estilo elegante) -------- */
abrirMensaje.addEventListener('click', () => {
  // Evita duplicados
  if (document.querySelector('#rinconcito-card')) {
    document.querySelector('#rinconcito-card').scrollIntoView({ behavior: 'smooth', block: 'start' });
    return;
  }

  // Inyecta estilos una sola vez
  if (!document.querySelector('#rinconcito-style')) {
    const style = document.createElement('style');
    style.id = 'rinconcito-style';
    style.textContent = `
      @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap');

      .rinconcito-card {
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, 'Great Vibes', cursive;
        max-width: 680px;
        margin: 28px auto 0;
        padding: 28px 24px;
        border-radius: 20px;
        background: radial-gradient(120% 140% at 10% 0%, #1a1a1a 0%, #0f0f0f 80%);
        color: #e9e5db;
        box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06);
        border: 1px solid rgba(255,255,255,.08);
        text-align: center;
        position: relative;
        overflow: hidden;
      }
      .rinconcito-card::after {
        content: "";
        position: absolute;
        inset: -2px;
        background: conic-gradient(from 210deg, rgba(255,215,160,.15), transparent 25%, transparent 75%, rgba(255,215,160,.12));
        filter: blur(8px);
        z-index: 0;
      }
      .rinconcito-content { position: relative; z-index: 1; }

      .rinconcito-title {
        margin: 0 0 6px;
        font-family: 'Great Vibes', cursive;
        font-size: 36px;
        letter-spacing: .5px;
        color: #f5e6c8;
        text-shadow: 0 1px 0 rgba(0,0,0,.5);
      }
      .rinconcito-sub {
        margin: 0 0 18px;
        font-size: 14px;
        opacity: .85;
      }
      .rinconcito-text {
        font-size: 18px;
        line-height: 1.6;
        margin: 0;
      }
      .gold {
        background: linear-gradient(135deg, #e6c27a 0%, #f5e6c8 35%, #b68e4c 60%, #f0d69a 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }
      .anillo {
        display: inline-block;
        font-size: 26px;
        margin: 0 6px;
        filter: drop-shadow(0 2px 4px rgba(182,142,76,.35));
        animation: brillo 2.6s ease-in-out infinite;
      }
      .anillo:nth-of-type(1) { animation-delay: .2s; }
      .anillo:nth-of-type(2) { animation-delay: .9s; }
      @keyframes brillo {
        0%, 100% { transform: translateY(0) rotate(0deg) scale(1); filter: drop-shadow(0 2px 4px rgba(182,142,76,.35)); }
        50% { transform: translateY(-2px) rotate(-6deg) scale(1.06); filter: drop-shadow(0 3px 8px rgba(255,215,160,.55)); }
      }
      .rinconcito-divider {
        width: 120px;
        height: 1px;
        margin: 14px auto 18px;
        background: linear-gradient(90deg, transparent, rgba(245,230,200,.8), transparent);
        opacity: .7;
      }
      .rinconcito-close {
        position: absolute;
        top: 10px;
        right: 10px;
        border: 0;
        background: rgba(255,255,255,.06);
        color: #f5e6c8;
        border-radius: 999px;
        padding: 6px 10px;
        font-size: 12px;
        cursor: pointer;
        transition: transform .15s ease, background .2s ease;
      }
      .rinconcito-close:hover { transform: scale(1.05); background: rgba(255,255,255,.12); }
    `;
    document.head.appendChild(style);
  }

  const msg = document.createElement('div');
  msg.id = 'rinconcito-card';
  msg.className = 'rinconcito-card';

  msg.innerHTML = `
    <button class="rinconcito-close" aria-label="Cerrar">‚úï</button>
    <div class="rinconcito-content">
      <h3 class="rinconcito-title">Para ti, Joss üíå</h3>
      <p class="rinconcito-sub">Nuestro rinconcito al final de la p√°gina</p>
      <div class="rinconcito-divider"></div>
      <p class="rinconcito-text">
        <span class="anillo">üíç</span>
        <span class="gold">Te amo.</span>
        Solo para decirte:
        <br>
        <span class="gold">¬øPUEDO SER T√ö ENAMORADO?</span>
        <span class="anillo">üíç</span>
      </p>
    </div>
  `;

  document.body.appendChild(msg);
  msg.scrollIntoView({ behavior: 'smooth', block: 'start' });

  // Efecto de corazones (tu funci√≥n existente)
  if (typeof burstHearts === 'function') burstHearts(12, 1200);

  // Cerrar tarjeta
  msg.querySelector('.rinconcito-close').addEventListener('click', () => {
    msg.remove();
  });
});

    /* -------- M√∫sica: reproducir/pausar -------- */
    playSong.addEventListener('click', () => {
      if (song.paused) {
        song.play();
        playSong.textContent = '‚è∏ Pausar';
      } else {
        song.pause();
        playSong.textContent = '‚ñ∂Ô∏é Nuestra canci√≥n';
      }
    });
    song.addEventListener('ended', () => {
      playSong.textContent = '‚ñ∂Ô∏é Nuestra canci√≥n';
    });

    /* -------- Corazones flotando (continuo + bursts) -------- */
    const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    const HEARTS = ['üíó','üíñ','üíò','üíù','üíì','üíû','‚ù§Ô∏è','ü©∑'];
    function spawnHeart(x = Math.random() * window.innerWidth, size = 16, duration = 4500){
      if(reduceMotion) return;
      const h = document.createElement('span');
      h.className = 'heart';
      h.textContent = HEARTS[Math.floor(Math.random() * HEARTS.length)];
      h.style.left = `${x}px`;
      h.style.bottom = `-24px`;
      h.style.fontSize = `${size}px`;
      h.style.animationDuration = `${duration}ms`;
      // ligera deriva
      const drift = (Math.random() - 0.5) * 120;
      h.style.transform = `translateX(${drift}px)`;
      heartsLayer.appendChild(h);
      h.addEventListener('animationend', () => h.remove());
    }

    // Lluvia continua muy sutil
    let heartTimer = null;
    function startHearts(){
      if(reduceMotion) return;
      if(heartTimer) return;
      heartTimer = setInterval(() => {
        spawnHeart(undefined, 14 + Math.random()*10, 4000 + Math.random()*2000);
      }, 600); // cada 0.6s aprox
    }
    function stopHearts(){
      if(heartTimer){ clearInterval(heartTimer); heartTimer = null; }
    }
    startHearts();

    // Explosi√≥n de corazones ‚Äúburst‚Äù
    function burstHearts(count = 8, spreadMs = 800){
      if(reduceMotion) return;
      const centerX = window.innerWidth/2;
      for(let i=0;i<count;i++){
        setTimeout(() => {
          spawnHeart(centerX + (Math.random()-0.5)*window.innerWidth*0.6, 18 + Math.random()*14, 3800 + Math.random()*1800);
        }, Math.random()*spreadMs);
      }
    }

    // Pausar si la pesta√±a pierde foco (por rendimiento)
    document.addEventListener('visibilitychange', () => {
      if(document.hidden) stopHearts(); else startHearts();
    });
  </script>
</body>
</html>
